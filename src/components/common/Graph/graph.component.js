import React, { Fragment, useState, useEffect, useRef, useContext } from 'react';
import _ from 'lodash';

/* import contexts */
import { ThemeContext } from 'styled-components';
/* import styles */
import { StyledDebug, StyledGraph, StyledGraphTooltip, StyledGrid, StyledActiveLineContainer, StyledActiveLineX, StyledActiveLineY, StyledActiveDot, StyledGraphSVG, StyledPolygon } from './graph.styles';

const Graph = props => {

    const { example } = props;

    const lowData = [
        [
            1609208698198,
            4960206.820157105
          ],
          [
            1609212401528,
            4587564.782550066
          ],
          [
            1609215894579,
            4764701.505527302
          ],
          [
            1609219454119,
            4751864.503905197
          ],
          [
            1609223209617,
            5005811.816279215
          ],
          [
            1609226702938,
            5089113.469830432
          ],
          [
            1609230237410,
            5206445.185723797
          ],
          [
            1609233848750,
            5523412.065013547
          ],
          [
            1609237513596,
            5581126.774894204
          ],
          [
            1609241135203,
            3524115.8176252926
          ],
          [
            1609244659873,
            5267491.305171878
          ],
          [
            1609248208610,
            6998483.070894802
          ],
          [
            1609251789859,
            6316363.449762336
          ],
          [
            1609255499064,
            5868502.96858588
          ],
          [
            1609259086846,
            4918101.788678624
          ],
          [
            1609262228922,
            5213374.7425374435
          ],
          [
            1609265921522,
            5172217.1553519955
          ],
          [
            1609269488442,
            4917207.174050961
          ],
          [
            1609273248853,
            4966102.376033749
          ],
          [
            1609276810737,
            5542022.782512827
          ],
          [
            1609280437046,
            5627317.517043891
          ],
          [
            1609284021718,
            5673997.975962186
          ],
          [
            1609287746008,
            5639160.5907351645
          ],
          [
            1609291334241,
            5590832.992640467
          ]
    ]

    const highData = [
        [
            1609208698198,
            4960206.820157105
          ],
          [
            1609212401528,
            4587564.782550066
          ],
          [
            1609215894579,
            4764701.505527302
          ],
          [
            1609219454119,
            4751864.503905197
          ],
          [
            1609223209617,
            5005811.816279215
          ],
          [
            1609226702938,
            5089113.469830432
          ],
          [
            1609230237410,
            5206445.185723797
          ],
          [
            1609233848750,
            5523412.065013547
          ],
          [
            1609237513596,
            5581126.774894204
          ],
          [
            1609241135203,
            3524115.8176252926
          ],
          [
            1609244659873,
            5267491.305171878
          ],
          [
            1609248208610,
            6998483.070894802
          ],
          [
            1609251789859,
            6316363.449762336
          ],
          [
            1609255499064,
            5868502.96858588
          ],
          [
            1609259086846,
            4918101.788678624
          ],
          [
            1609262228922,
            5213374.7425374435
          ],
          [
            1609265921522,
            5172217.1553519955
          ],
          [
            1609269488442,
            4917207.174050961
          ],
          [
            1609273248853,
            4966102.376033749
          ],
          [
            1609276810737,
            5542022.782512827
          ],
          [
            1609280437046,
            5627317.517043891
          ],
          [
            1609284021718,
            5673997.975962186
          ],
          [
            1609287746008,
            5639160.5907351645
          ],
          [
            1609291334241,
            5590832.992640467
          ],
          [
            1609294891519,
            5564195.717343372
          ],
          [
            1609298390060,
            5634810.462727623
          ],
          [
            1609301912007,
            5636316.84183285
          ],
          [
            1609305654442,
            5609580.940941671
          ],
          [
            1609309229868,
            5590889.6261786735
          ],
          [
            1609312776396,
            5802209.6328466255
          ],
          [
            1609316297311,
            5580676.967632701
          ],
          [
            1609320011899,
            5593379.134945769
          ],
          [
            1609322958734,
            5532616.859451721
          ],
          [
            1609326563244,
            5567444.302759599
          ],
          [
            1609330190043,
            5535399.9810628425
          ],
          [
            1609333917769,
            5836748.356028191
          ],
          [
            1609337397391,
            5534212.635732655
          ],
          [
            1609341080991,
            5485378.483760265
          ],
          [
            1609345711318,
            5497169.305273557
          ],
          [
            1609349271411,
            5346517.190008723
          ],
          [
            1609352911548,
            5268597.515666143
          ],
          [
            1609356452946,
            4990646.151141713
          ],
          [
            1609360160580,
            5534646.003105562
          ],
          [
            1609363724230,
            5486030.564819113
          ],
          [
            1609367272864,
            5034890.06604827
          ],
          [
            1609370911377,
            5287708.950077088
          ],
          [
            1609374704475,
            5323538.7939492855
          ],
          [
            1609378299813,
            6159337.108070112
          ],
          [
            1609381707448,
            6164134.934128908
          ],
          [
            1609385369032,
            6416772.509540569
          ],
          [
            1609389456596,
            6343365.842973462
          ],
          [
            1609391933663,
            6159155.510737918
          ],
          [
            1609395567470,
            6132314.408128334
          ],
          [
            1609399064118,
            6108097.12657145
          ],
          [
            1609403219713,
            6178386.439060965
          ],
          [
            1609406298575,
            6232279.935987902
          ],
          [
            1609409944432,
            6244534.344268342
          ],
          [
            1609413497798,
            3896420.576360934
          ],
          [
            1609417119021,
            6048984.073837486
          ],
          [
            1609420781905,
            5977681.701029127
          ],
          [
            1609424290456,
            5949664.5432383595
          ],
          [
            1609427937994,
            5907440.933491378
          ],
          [
            1609431501857,
            5915977.661751211
          ],
          [
            1609435165519,
            5740937.444599355
          ],
          [
            1609438774267,
            5755076.655846272
          ],
          [
            1609442323015,
            5806508.7502980055
          ],
          [
            1609445951808,
            5769021.606435024
          ],
          [
            1609449512859,
            5796931.156343471
          ],
          [
            1609453190595,
            5874434.274829809
          ],
          [
            1609456671311,
            6111097.793514348
          ],
          [
            1609460407044,
            6223936.619093153
          ],
          [
            1609463945745,
            6117807.861651748
          ],
          [
            1609467531477,
            6085061.058284437
          ],
          [
            1609471111912,
            6269918.062242006
          ],
          [
            1609474710656,
            6302875.661368676
          ],
          [
            1609478324390,
            6238245.648009402
          ],
          [
            1609481968247,
            6249352.764670387
          ],
          [
            1609485542160,
            6244681.652670148
          ],
          [
            1609489113861,
            6226986.505401474
          ],
          [
            1609492469099,
            6209963.683373198
          ],
          [
            1609495378132,
            6292811.177965031
          ],
          [
            1609498981632,
            6343735.958170567
          ],
          [
            1609502651136,
            6165344.397778111
          ],
          [
            1609506226685,
            6324481.430994377
          ],
          [
            1609509806668,
            6347783.124832546
          ],
          [
            1609515218444,
            5674329.902276044
          ],
          [
            1609518771814,
            5843521.564020134
          ],
          [
            1609521694922,
            5768118.079394805
          ],
          [
            1609524445684,
            5791559.654053861
          ],
          [
            1609528054850,
            5832525.912432188
          ],
          [
            1609531686153,
            5795405.86102077
          ],
          [
            1609535311754,
            5660786.484710056
          ],
          [
            1609538875330,
            5544420.565121292
          ],
          [
            1609542506718,
            5603607.574940205
          ],
          [
            1609546121548,
            5529697.473578921
          ],
          [
            1609550394288,
            5409195.618539575
          ],
          [
            1609553990049,
            5501799.262688622
          ],
          [
            1609557567339,
            5550074.188214445
          ],
          [
            1609561301264,
            5530448.987743063
          ],
          [
            1609564877655,
            5563499.663962046
          ],
          [
            1609568385336,
            5529691.5372853745
          ],
          [
            1609571951229,
            5594457.395692456
          ],
          [
            1609575642371,
            5442133.180794038
          ],
          [
            1609579067821,
            5370199.622880842
          ],
          [
            1609582786958,
            5389411.621396341
          ],
          [
            1609586331797,
            5431198.358663572
          ],
          [
            1609589994735,
            5366097.0751939
          ],
          [
            1609592688184,
            5451823.379720838
          ],
          [
            1609596283862,
            5276515.30476897
          ],
          [
            1609599911753,
            5572762.005945901
          ],
          [
            1609603312488,
            5438715.963250022
          ],
          [
            1609606888354,
            5256340.454110593
          ],
          [
            1609610510038,
            5146930.123477056
          ],
          [
            1609614114316,
            5176023.031136976
          ],
          [
            1609617692117,
            5231494.741641012
          ],
          [
            1609621301912,
            5129230.755092085
          ],
          [
            1609624907895,
            5059801.931323924
          ],
          [
            1609628507935,
            5053694.242413511
          ],
          [
            1609632117952,
            4977054.394967525
          ],
          [
            1609635695257,
            4851367.000463272
          ],
          [
            1609639312599,
            4849327.26008762
          ],
          [
            1609643500388,
            4807910.878682278
          ],
          [
            1609647089401,
            4292657.282892407
          ],
          [
            1609650673862,
            4393055.375501411
          ],
          [
            1609654336807,
            4360285.151855811
          ],
          [
            1609657888992,
            4444196.385074978
          ],
          [
            1609661432365,
            4514578.343589589
          ],
          [
            1609665279011,
            4527740.26608932
          ],
          [
            1609669093277,
            4637588.4881588835
          ],
          [
            1609672644793,
            4543908.0666553695
          ],
          [
            1609675840665,
            4548642.347557712
          ],
          [
            1609679489218,
            4582028.142557143
          ],
          [
            1609683092455,
            4777267.191636412
          ],
          [
            1609686674144,
            4805975.911751145
          ],
          [
            1609690157357,
            4724500.5690724375
          ],
          [
            1609693488484,
            4155693.2919386635
          ],
          [
            1609697016800,
            4335227.649879082
          ],
          [
            1609700597883,
            4706849.471326203
          ],
          [
            1609704179330,
            4793002.673027697
          ],
          [
            1609708123223,
            4823994.556056133
          ],
          [
            1609711774026,
            4660694.985049412
          ],
          [
            1609715349104,
            4726244.735796215
          ],
          [
            1609718709740,
            4980288.707810188
          ],
          [
            1609722384109,
            4782374.176188955
          ],
          [
            1609725985078,
            4814619.224606763
          ],
          [
            1609729586362,
            4741507.8950550975
          ],
          [
            1609733099847,
            4667151.087913391
          ],
          [
            1609736711284,
            4629745.616785341
          ],
          [
            1609740294821,
            4767649.937309814
          ],
          [
            1609744640714,
            4782328.423294471
          ],
          [
            1609748209646,
            4493672.290965432
          ],
          [
            1609751780852,
            4563349.304343827
          ],
          [
            1609755417308,
            4358007.762013143
          ],
          [
            1609758933352,
            4460555.537785491
          ],
          [
            1609762689067,
            4439074.728375451
          ],
          [
            1609766083819,
            4378358.882179452
          ],
          [
            1609769816587,
            4332950.225064873
          ],
          [
            1609773384530,
            4236393.202930971
          ],
          [
            1609776923442,
            4258055.391705544
          ],
          [
            1609780423115,
            4359240.612857095
          ],
          [
            1609784195625,
            4312759.203655649
          ],
          [
            1609787726518,
            4211057.299808412
          ],
          [
            1609791390295,
            3825111.8077346897
          ],
          [
            1609794909681,
            3920625.11268779
          ],
          [
            1609798509427,
            3817430.521680038
          ],
          [
            1609802063316,
            3987215.6155958534
          ],
          [
            1609805800856,
            3998820.3073641174
          ],
          [
            1609809254600,
            3854038.677998861
          ],
          [
            1609813227921,
            3249861.013094512
          ],
          [
            1609816453529,
            3488846.2002180647
          ],
          [
            1609820093932,
            3692299.409621189
          ],
          [
            1609823691226,
            3958697.9370502112
          ],
          [
            1609827302475,
            4103242.536139064
          ],
          [
            1609834788006,
            3935862.029075096
          ],
          [
            1609838068357,
            3862655.7000559787
          ],
          [
            1609841799838,
            3791108.8621902233
          ],
          [
            1609845309236,
            3496266.336964686
          ],
          [
            1609848976035,
            3842153.6732419645
          ],
          [
            1609852484908,
            3329926.782329761
          ],
          [
            1609856116602,
            3325259.1372438916
          ],
          [
            1609859804485,
            3330462.3426948297
          ],
          [
            1609863379622,
            3598152.3863397045
          ],
          [
            1609867008110,
            4198992.250467478
          ],
          [
            1609870517834,
            4338385.824821258
          ],
          [
            1609874017538,
            5214326.400654344
          ],
          [
            1609877689922,
            4047477.6302987663
          ],
          [
            1609881280150,
            4468303.547942496
          ],
          [
            1609884921069,
            4316923.340304385
          ],
          [
            1609888528228,
            4021753.146404182
          ],
          [
            1609892225538,
            3942375.219143824
          ],
          [
            1609895795614,
            3865352.968589208
          ],
          [
            1609899389460,
            3926971.0758778383
          ],
          [
            1609902936462,
            4132216.056369803
          ],
          [
            1609906429391,
            4090063.7057138397
          ],
          [
            1609910224051,
            4094521.87650775
          ],
          [
            1609914004837,
            4078189.6102168425
          ],
          [
            1609917330935,
            4028532.646452616
          ],
          [
            1609920847916,
            4219364.293387695
          ],
          [
            1609924432882,
            4161254.4399515893
          ],
          [
            1609928074991,
            4195498.093828177
          ],
          [
            1609931672178,
            3986783.76510525
          ],
          [
            1609934562894,
            3689603.5566891534
          ],
          [
            1609938925787,
            3645799.788391093
          ],
          [
            1609942523352,
            3684590.6943530883
          ],
          [
            1609946201008,
            3451963.1251811734
          ],
          [
            1609949801030,
            3328564.6931718974
          ],
          [
            1609953410951,
            3387725.678862448
          ],
          [
            1609957023892,
            3579280.340110485
          ],
          [
            1609960546291,
            3568933.3346008128
          ],
          [
            1609964170394,
            3662398.322353051
          ],
          [
            1609967808436,
            4278011.307848599
          ],
          [
            1609971279476,
            4037687.5667511383
          ],
          [
            1609974991664,
            3864756.1254516155
          ],
          [
            1609978642480,
            3892586.964888342
          ],
          [
            1609981590182,
            3254824.2075756644
          ],
          [
            1609985114083,
            3231892.5276076016
          ],
          [
            1609988724568,
            3107853.0571458586
          ],
          [
            1609992309273,
            3040280.273295102
          ],
          [
            1609996014140,
            3065320.6245465325
          ],
          [
            1610003584371,
            3037840.668436787
          ],
          [
            1610007224210,
            3032317.1623734822
          ],
          [
            1610010757379,
            3040344.8122576056
          ],
          [
            1610014139077,
            2987468.1074386956
          ],
          [
            1610017528517,
            2955959.166884285
          ],
          [
            1610021430660,
            2950079.643180483
          ],
          [
            1610024967162,
            2591529.4564337134
          ],
          [
            1610028555140,
            2564423.7734511266
          ],
          [
            1610032195562,
            2692626.04926197
          ],
          [
            1610035973594,
            3314352.677987139
          ],
          [
            1610039512350,
            2944320.022398778
          ],
          [
            1610043158386,
            3057010.733892733
          ],
          [
            1610046717927,
            2701021.0037703374
          ],
          [
            1610050290033,
            3036550.0970755834
          ],
          [
            1610053915490,
            3013480.899079589
          ],
          [
            1610057526943,
            2953503.416837717
          ],
          [
            1610061127898,
            2934954.1314541087
          ],
          [
            1610064775883,
            2862431.5799588924
          ],
          [
            1610068323828,
            2780919.4410586604
          ],
          [
            1610071980672,
            2752760.697639746
          ],
          [
            1610075542810,
            2796573.829887692
          ],
          [
            1610079048092,
            2793317.684592096
          ],
          [
            1610082739353,
            2790423.0313668116
          ],
          [
            1610086512451,
            2694245.0572137586
          ],
          [
            1610089961852,
            2708994.2809286187
          ],
          [
            1610093492333,
            2754313.271762122
          ],
          [
            1610097143625,
            2753992.496942923
          ],
          [
            1610100617269,
            2755077.5813842528
          ],
          [
            1610104168511,
            2808243.0096445624
          ],
          [
            1610107845704,
            2733193.2871776493
          ],
          [
            1610111392347,
            2715394.773676786
          ],
          [
            1610114976293,
            2731792.0311474497
          ],
          [
            1610119037957,
            2773732.593643051
          ],
          [
            1610122628520,
            2922818.043801169
          ],
          [
            1610126221539,
            2820894.3369792677
          ],
          [
            1610129876794,
            2802456.055244637
          ],
          [
            1610133393118,
            2946744.7950862483
          ],
          [
            1610137207227,
            2911473.871696734
          ],
          [
            1610140579071,
            2834094.8141084644
          ],
          [
            1610144240642,
            2882759.745927706
          ],
          [
            1610147698705,
            2818188.4540504725
          ],
          [
            1610151418547,
            2751152.72481714
          ],
          [
            1610158597525,
            2741868.1836719294
          ],
          [
            1610162164551,
            2740883.197469758
          ],
          [
            1610165820707,
            2721144.151346734
          ],
          [
            1610169430007,
            2728113.356777674
          ],
          [
            1610173014418,
            2719006.3902901113
          ],
          [
            1610176582464,
            2699508.5038472954
          ],
          [
            1610180261233,
            2569083.558225024
          ],
          [
            1610183862055,
            2524987.074371921
          ],
          [
            1610187451065,
            2519126.113398732
          ],
          [
            1610190902344,
            2483336.996458619
          ],
          [
            1610194614151,
            2490069.757751958
          ],
          [
            1610198200034,
            2472059.515584838
          ],
          [
            1610201817458,
            2489088.150603719
          ],
          [
            1610205388699,
            2477056.6411320213
          ],
          [
            1610208704412,
            2450528.3245316823
          ],
          [
            1610212599607,
            2578153.842922081
          ],
          [
            1610215633604,
            2617337.9025926804
          ],
          [
            1610219208592,
            2634773.851143121
          ],
          [
            1610222813545,
            2618090.2094991654
          ],
          [
            1610226373604,
            2666947.9424262987
          ],
          [
            1610230022626,
            2624343.717458774
          ],
          [
            1610233636928,
            2626075.8493571705
          ],
          [
            1610237264249,
            2594639.1817906406
          ],
          [
            1610240811852,
            2655584.2372654383
          ],
          [
            1610244421940,
            2645323.817299735
          ],
          [
            1610251625419,
            2633334.901339514
          ],
          [
            1610255207629,
            2643777.8659485118
          ],
          [
            1610258825462,
            2632467.720810764
          ],
          [
            1610262449801,
            2656709.645794795
          ],
          [
            1610266005558,
            2675824.71299914
          ],
          [
            1610280938244,
            2882223.6247777008
          ],
          [
            1610284122014,
            2901968.495853871
          ],
          [
            1610287301697,
            2935912.5535140643
          ],
          [
            1610290935416,
            2876937.081293296
          ],
          [
            1610294515204,
            2850425.634821772
          ],
          [
            1610298147834,
            2815899.297440814
          ],
          [
            1610301721800,
            2749238.0161068803
          ],
          [
            1610305347322,
            2885597.989024502
          ],
          [
            1610308948252,
            2835457.646263771
          ],
          [
            1610312545392,
            2853151.428925517
          ],
          [
            1610316110767,
            2894583.7215345944
          ],
          [
            1610319735486,
            2930202.1156212618
          ],
          [
            1610323328884,
            2795474.2639982556
          ],
          [
            1610326906640,
            2787905.688273883
          ],
          [
            1610330538666,
            2778865.0167925684
          ],
          [
            1610337715926,
            2778865.0167925684
          ],
          [
            1610341317457,
            2792143.5122590493
          ],
          [
            1610348519824,
            2725674.085994365
          ],
          [
            1610352120695,
            2569449.337331293
          ],
          [
            1610355731724,
            2618934.043003765
          ],
          [
            1610359324130,
            2611259.675384145
          ],
          [
            1610363094933,
            2701325.571884461
          ],
          [
            1610366533756,
            2558233.7365398128
          ],
          [
            1610370114547,
            2557557.0619595586
          ],
          [
            1610373763523,
            2596129.023403992
          ],
          [
            1610377335346,
            2504015.7920578755
          ],
          [
            1610380904580,
            2601482.1768626682
          ],
          [
            1610384537883,
            2624075.6847429886
          ],
          [
            1610388147206,
            2837489.146718219
          ],
          [
            1610391720287,
            2691874.0068417015
          ],
          [
            1610395319243,
            2634174.4086304023
          ],
          [
            1610398933159,
            2552276.3902422637
          ],
          [
            1610402503419,
            2552276.3902422637
          ],
          [
            1610407287028,
            2529361.7206980265
          ],
          [
            1610411052070,
            2466655.0771382647
          ],
          [
            1610414582820,
            2265857.3886810327
          ],
          [
            1610421690443,
            2259140.234291569
          ],
          [
            1610425206731,
            2299532.226309402
          ],
          [
            1610428972273,
            2293864.438190422
          ],
          [
            1610432911826,
            2260163.8047799044
          ],
          [
            1610436601053,
            3824146.7375274347
          ],
          [
            1610439588885,
            3314844.4392401045
          ],
          [
            1610443275244,
            3678365.6613066075
          ],
          [
            1610446856595,
            3451619.857369009
          ],
          [
            1610450433594,
            4076267.6926808855
          ],
          [
            1610453837708,
            3679926.0734620746
          ],
          [
            1610457406308,
            3488432.0084848804
          ],
          [
            1610460964844,
            3411430.4676838056
          ],
          [
            1610464177333,
            3462550.096564901
          ],
          [
            1610467728215,
            3453275.5737499804
          ],
          [
            1610471359766,
            3472291.8605539594
          ],
          [
            1610474956372,
            3463793.96581779
          ],
          [
            1610478544882,
            2616978.8081017854
          ],
          [
            1610482133097,
            2605101.296760218
          ],
          [
            1610485734437,
            2633985.649716017
          ],
          [
            1610489305473,
            2633985.649716017
          ],
          [
            1610492902906,
            2625639.2555767205
          ],
          [
            1610497389934,
            2666636.217506534
          ],
          [
            1610500000667,
            2666636.217506534
          ],
          [
            1610503753606,
            2697940.6687550023
          ],
          [
            1610507337672,
            2692071.5160042257
          ],
          [
            1610511006878,
            2622282.8692950993
          ],
          [
            1610514655610,
            2644945.697478799
          ],
          [
            1610518214802,
            2603722.1481088335
          ],
          [
            1610521831959,
            2683957.318928216
          ],
          [
            1610525321558,
            2702434.5619444214
          ],
          [
            1610529080326,
            2548012.458724979
          ],
          [
            1610532587327,
            2456765.4881459204
          ],
          [
            1610536150470,
            2479589.3655134365
          ],
          [
            1610539822212,
            2531406.6775073083
          ],
          [
            1610543390927,
            2539451.1850578235
          ],
          [
            1610547079956,
            2627264.7373355664
          ],
          [
            1610550592237,
            2604612.066584894
          ],
          [
            1610554309343,
            2580244.073010028
          ],
          [
            1610558038126,
            2525148.6974480376
          ],
          [
            1610561643039,
            2509679.084700976
          ],
          [
            1610565225895,
            2555163.8018620764
          ],
          [
            1610568831263,
            2555479.779676197
          ],
          [
            1610572436263,
            2315290.8899346334
          ],
          [
            1610576005896,
            2079790.9484183977
          ],
          [
            1610579633166,
            2140489.8515482266
          ],
          [
            1610583271611,
            2149400.676777429
          ],
          [
            1610586900764,
            2321335.1375214458
          ],
          [
            1610590497333,
            2287605.4482337246
          ],
          [
            1610594049669,
            2285305.971006751
          ],
          [
            1610597624297,
            2340800.828362704
          ],
          [
            1610601190665,
            2162958.3525139405
          ],
          [
            1610604970279,
            1996833.4224036955
          ],
          [
            1610608758454,
            1977518.516142913
          ],
          [
            1610612463139,
            2114078.8190933187
          ],
          [
            1610615598042,
            2227309.451013276
          ],
          [
            1610619169550,
            2128795.499365436
          ],
          [
            1610622834065,
            2557466.1820403747
          ],
          [
            1610626701875,
            2515482.6267481376
          ],
          [
            1610631224800,
            2547557.5101072663
          ],
          [
            1610634745534,
            2489410.5101560927
          ],
          [
            1610636555702,
            2531618.025752929
          ],
          [
            1610640171629,
            2510353.8376634796
          ],
          [
            1610643751629,
            2351712.8390556304
          ],
          [
            1610647771599,
            1988064.4882979745
          ],
          [
            1610651332004,
            2188430.187775391
          ],
          [
            1610655003947,
            2217121.309243793
          ],
          [
            1610658523720,
            2223249.715602504
          ],
          [
            1610662104695,
            2180565.120962383
          ],
          [
            1610666609079,
            2190581.968988624
          ],
          [
            1610670400830,
            2313837.639270859
          ],
          [
            1610673982373,
            2142535.0615387936
          ],
          [
            1610677464725,
            2101745.705285522
          ],
          [
            1610681081673,
            2136474.372151578
          ],
          [
            1610684524649,
            1975677.1843775613
          ],
          [
            1610688188744,
            2072293.0425670946
          ],
          [
            1610691793839,
            2024726.0333784185
          ],
          [
            1610695364725,
            2012117.8620342382
          ],
          [
            1610698933337,
            2109167.101395779
          ],
          [
            1610702647794,
            2095337.5220350788
          ],
          [
            1610706184184,
            2078978.1513324343
          ],
          [
            1610709729571,
            2069635.2808970802
          ],
          [
            1610713494294,
            2039409.3310437438
          ],
          [
            1610715697920,
            2039409.3310437438
          ],
          [
            1610719297851,
            1969429.250464972
          ],
          [
            1610722915863,
            1933699.6915596386
          ],
          [
            1610726495990,
            1906688.23887774
          ],
          [
            1610730543116,
            1939924.3238583945
          ],
          [
            1610734160432,
            1848986.9911680429
          ],
          [
            1610737736286,
            1780177.8814390372
          ],
          [
            1610741360351,
            1890327.4019697818
          ],
          [
            1610744914464,
            1840999.4500447083
          ],
          [
            1610748569910,
            1817249.289365415
          ],
          [
            1610752177760,
            1910696.9322252718
          ],
          [
            1610760862214,
            1887832.1991022245
          ],
          [
            1610764446909,
            1895794.1809150227
          ],
          [
            1610768118657,
            1923693.354923267
          ],
          [
            1610771708660,
            1923337.8872407654
          ],
          [
            1610775272739,
            2775677.832429343
          ],
          [
            1610778857540,
            3240744.53569491
          ],
          [
            1610782408765,
            2723393.666607996
          ],
          [
            1610786062369,
            2664021.3819178236
          ],
          [
            1610789635564,
            2726994.0965022193
          ],
          [
            1610793190512,
            2733673.878328041
          ],
          [
            1610796845906,
            2677625.169550281
          ],
          [
            1610800457455,
            2648424.392523054
          ],
          [
            1610804050495,
            2713689.887139965
          ],
          [
            1610807602718,
            2713412.195449113
          ],
          [
            1610811291241,
            2646507.932258059
          ],
          [
            1610814843870,
            2644806.0932971844
          ],
          [
            1610818440080,
            2639646.779211061
          ],
          [
            1610822053740,
            2583867.7515609763
          ],
          [
            1610825621909,
            2572193.547739694
          ],
          [
            1610829307892,
            2568094.3094202164
          ],
          [
            1610832854805,
            2452132.46285357
          ],
          [
            1610836439741,
            2418417.9304343727
          ],
          [
            1610840011973,
            2409074.2126615383
          ],
          [
            1610843713072,
            2409074.2126615383
          ],
          [
            1610850833025,
            2456003.530127337
          ],
          [
            1610854423841,
            2422188.588217014
          ],
          [
            1610857961609,
            2419225.976229784
          ],
          [
            1610861692101,
            2369336.4867248824
          ],
          [
            1610865218868,
            2373533.7082942086
          ],
          [
            1610868797614,
            2421226.7416395457
          ],
          [
            1610872351837,
            2281511.464974668
          ],
          [
            1610875778853,
            2356919.669914956
          ],
          [
            1610879571377,
            2339504.1132495203
          ],
          [
            1610883176180,
            2365151.5634011943
          ],
          [
            1610886871908,
            2383644.194206173
          ],
          [
            1610890394914,
            2368509.2586560547
          ],
          [
            1610893968478,
            2323134.1733733183
          ],
          [
            1610897664434,
            2426052.807414549
          ],
          [
            1610901181947,
            2429784.98900927
          ],
          [
            1610904779091,
            2396134.650052551
          ],
          [
            1610908464732,
            2390933.930604356
          ],
          [
            1610911961045,
            2339550.8454169617
          ],
          [
            1610915663406,
            2312100.9084082805
          ],
          [
            1610919204466,
            2269386.6435598684
          ],
          [
            1610922768873,
            2287493.7693340117
          ],
          [
            1610926375745,
            2400197.4263250437
          ],
          [
            1610930168788,
            2424752.054464738
          ],
          [
            1610933671748,
            2446076.981244902
          ],
          [
            1610937177043,
            2463615.1784678176
          ],
          [
            1610940817870,
            2848684.866074786
          ],
          [
            1610944350388,
            2787677.752976592
          ],
          [
            1610948047384,
            2783102.489743009
          ],
          [
            1610951619206,
            2719267.501429495
          ],
          [
            1610955173399,
            2716606.029640425
          ],
          [
            1610958816112,
            2706217.795178129
          ],
          [
            1610962199675,
            2693493.941683206
          ],
          [
            1610966408462,
            3416763.990904029
          ],
          [
            1610969592190,
            4066673.966408758
          ],
          [
            1610973199204,
            3438141.5254668733
          ],
          [
            1610976733709,
            3388550.7128163213
          ],
          [
            1610980371100,
            3298969.1584039056
          ],
          [
            1610983961396,
            2937976.7111612014
          ],
          [
            1610987518176,
            2983791.656208813
          ],
          [
            1610991523271,
            2935254.930722219
          ],
          [
            1610994783819,
            2901653.6950379107
          ],
          [
            1610998337749,
            2888717.78491208
          ],
          [
            1611002031188,
            2898947.2923857253
          ],
          [
            1611005479641,
            2774877.689873074
          ],
          [
            1611009113625,
            2760000.4280551523
          ],
          [
            1611012691069,
            2788921.1538923727
          ],
          [
            1611016483724,
            2756378.991374194
          ],
          [
            1611020021636,
            2725903.027360836
          ],
          [
            1611023636849,
            2695490.7457603784
          ],
          [
            1611027188261,
            3236392.4712654604
          ],
          [
            1611030808564,
            3750379.480685632
          ],
          [
            1611034635873,
            3769052.8451605374
          ],
          [
            1611037920144,
            3593941.756705987
          ],
          [
            1611041523281,
            3353570.967149504
          ],
          [
            1611045132867,
            3486141.4411991765
          ],
          [
            1611048469834,
            3206746.032414893
          ],
          [
            1611052331208,
            1827156.3307223278
          ],
          [
            1611055955988,
            2323397.8512015394
          ],
          [
            1611059568960,
            2228610.066104969
          ],
          [
            1611063201941,
            2181901.785499759
          ],
          [
            1611066749395,
            2350743.3415059396
          ],
          [
            1611070324326,
            2336966.587097447
          ],
          [
            1611073975069,
            2443967.9105880996
          ],
          [
            1611077571976,
            2238912.6889397013
          ],
          [
            1611081123212,
            2198566.261198938
          ],
          [
            1611084766422,
            2315982.7177781034
          ],
          [
            1611088397738,
            2277073.1878620973
          ],
          [
            1611091983538,
            2202583.57053001
          ],
          [
            1611095586852,
            2420069.2836962272
          ],
          [
            1611099219264,
            2451641.2295682863
          ],
          [
            1611102804272,
            2519424.521160272
          ],
          [
            1611106865531,
            3092385.9450579477
          ],
          [
            1611110007037,
            3311438.1263219533
          ],
          [
            1611112626667,
            3579203.1697680564
          ],
          [
            1611116362209,
            3407865.416593057
          ],
          [
            1611120246152,
            3275470.346210504
          ],
          [
            1611123583409,
            3450650.739837298
          ],
          [
            1611127328008,
            3640318.2463012924
          ],
          [
            1611130854965,
            3983353.892347814
          ],
          [
            1611134237277,
            3884580.0655556754
          ],
          [
            1611138100434,
            3232993.097615803
          ],
          [
            1611141646290,
            3172769.7041503456
          ],
          [
            1611145325198,
            3030887.184571576
          ],
          [
            1611147822082,
            3161899.7761884993
          ],
          [
            1611151496290,
            3527658.854179016
          ],
          [
            1611155040438,
            3735291.188077022
          ],
          [
            1611158635558,
            3480063.3779552393
          ],
          [
            1611162261261,
            4018582.4743539747
          ],
          [
            1611165866809,
            3882052.838755695
          ],
          [
            1611169445734,
            3929058.306289763
          ],
          [
            1611174151339,
            4898952.704360203
          ],
          [
            1611176699418,
            4831805.859580546
          ],
          [
            1611181452794,
            5554146.115964491
          ],
          [
            1611184483719,
            5382443.601661928
          ],
          [
            1611187354500,
            5402887.030906335
          ],
          [
            1611191119941,
            5484532.051863699
          ],
          [
            1611194992004,
            5781682.520896389
          ],
          [
            1611198907425,
            5122460.27060608
          ],
          [
            1611202457552,
            5128870.3024485605
          ],
          [
            1611206100000,
            5032285.044712863
          ],
          [
            1611209814072,
            5131878.612101479
          ],
          [
            1611213569286,
            5036850.12700526
          ],
          [
            1611216872607,
            5371167.040011507
          ],
          [
            1611220471200,
            4643796.202059335
          ],
          [
            1611224082640,
            4263569.617384557
          ],
          [
            1611227676161,
            3586064.3984590676
          ],
          [
            1611231307622,
            4276893.504484769
          ],
          [
            1611235038379,
            4434397.477274504
          ],
          [
            1611238511116,
            4003099.036447756
          ],
          [
            1611242067425,
            3926176.1094094603
          ],
          [
            1611245665292,
            3488157.650753666
          ],
          [
            1611249203674,
            3751273.2805431965
          ],
          [
            1611252879216,
            3819276.6499556997
          ],
          [
            1611256402374,
            3937720.2397873234
          ],
          [
            1611259994332,
            4725180.472608444
          ],
          [
            1611263551801,
            4527925.882376656
          ],
          [
            1611267287678,
            4276229.703643706
          ],
          [
            1611270837746,
            3820666.5689770114
          ],
          [
            1611274489023,
            4256177.295334311
          ],
          [
            1611278063890,
            4090674.785860758
          ],
          [
            1611281638737,
            4144798.6950008436
          ],
          [
            1611285244247,
            4261282.544482291
          ],
          [
            1611289091831,
            4100142.722123305
          ],
          [
            1611292372187,
            4385793.283765963
          ],
          [
            1611299065910,
            4303118.810393253
          ],
          [
            1611302625316,
            4313219.481753288
          ],
          [
            1611306185462,
            4203877.540980921
          ],
          [
            1611310163810,
            4224750.912967037
          ],
          [
            1611313673025,
            4282304.434908135
          ],
          [
            1611317673438,
            4601311.4643821195
          ],
          [
            1611321277127,
            4623593.984901496
          ],
          [
            1611324865621,
            4680808.253377698
          ],
          [
            1611328434871,
            4681573.198705548
          ],
          [
            1611332045298,
            4605362.880752726
          ],
          [
            1611335647316,
            4581762.215133943
          ],
          [
            1611339252828,
            4602613.392406452
          ],
          [
            1611342876132,
            4632959.004411322
          ],
          [
            1611347007816,
            4634229.110668114
          ],
          [
            1611350391010,
            4564177.1402001465
          ],
          [
            1611353952812,
            4540926.25852657
          ],
          [
            1611357550029,
            4317147.986123361
          ],
          [
            1611361199651,
            4635982.054926055
          ],
          [
            1611364518232,
            4425752.878047236
          ],
          [
            1611368211379,
            4271146.1308035245
          ],
          [
            1611371761064,
            4307385.340040002
          ],
          [
            1611375010198,
            4344308.267094954
          ],
          [
            1611378273919,
            4255844.250373001
          ],
          [
            1611381843686,
            4355089.785381006
          ],
          [
            1611385456001,
            4305579.268588548
          ],
          [
            1611389927151,
            4557281.248493418
          ],
          [
            1611393438158,
            4630387.584053803
          ],
          [
            1611397047729,
            4934514.08014049
          ],
          [
            1611400621002,
            4821260.405875445
          ],
          [
            1611404038410,
            4876115.230567689
          ],
          [
            1611407607290,
            4893554.047139764
          ],
          [
            1611411162770,
            4339120.995629449
          ],
          [
            1611414825166,
            4362730.290857792
          ],
          [
            1611418111902,
            4446158.2981075775
          ],
          [
            1611421698964,
            4141141.7685507033
          ],
          [
            1611425336514,
            4089909.481204576
          ],
          [
            1611428892710,
            4318793.498617372
          ],
          [
            1611432285835,
            4269039.401755735
          ],
          [
            1611435943863,
            5868872.589326258
          ],
          [
            1611439768473,
            4982918.227257881
          ],
          [
            1611443349511,
            4948729.695393193
          ],
          [
            1611447404593,
            5185536.44588173
          ],
          [
            1611451054811,
            5305076.090456536
          ],
          [
            1611454655356,
            5339980.0933393845
          ],
          [
            1611458218523,
            5508818.72542811
          ],
          [
            1611462132698,
            5456118.66207301
          ],
          [
            1611465776245,
            6796604.346014442
          ],
          [
            1611469369790,
            6151336.463486438
          ],
          [
            1611473225506,
            5999481.837764041
          ],
          [
            1611476303583,
            5950199.202663023
          ],
          [
            1611480125781,
            6763697.862124666
          ],
          [
            1611483193741,
            6735018.49554608
          ],
          [
            1611486416431,
            6822721.966568639
          ],
          [
            1611490024869,
            6013856.022737591
          ],
          [
            1611493663161,
            6155869.353154515
          ],
          [
            1611497230372,
            6162612.088871323
          ],
          [
            1611500891030,
            5909269.709801651
          ],
          [
            1611505622724,
            5870162.627456897
          ],
          [
            1611508990471,
            6198591.864921698
          ],
          [
            1611512533872,
            6202037.293254497
          ],
          [
            1611516295565,
            6184327.971924013
          ],
          [
            1611519807082,
            5797412.516974124
          ],
          [
            1611522589289,
            6047863.72331026
          ],
          [
            1611526258587,
            5947125.416020521
          ],
          [
            1611529386211,
            6081882.665962258
          ],
          [
            1611534274819,
            6021908.886778334
          ],
          [
            1611536571485,
            4680668.978169665
          ],
          [
            1611540404336,
            4849721.135929021
          ],
          [
            1611543988015,
            4680879.924128041
          ],
          [
            1611548556622,
            4755594.264406262
          ],
          [
            1611552284926,
            4839138.340529322
          ],
          [
            1611556084615,
            4943284.876325108
          ],
          [
            1611559340906,
            5224495.941601735
          ],
          [
            1611562955122,
            5160260.992822801
          ],
          [
            1611566847163,
            4871600.76684286
          ],
          [
            1611570422327,
            4814113.79289288
          ],
          [
            1611573690483,
            4599221.69295919
          ],
          [
            1611576844713,
            5059654.445114297
          ],
          [
            1611580371029,
            4983534.454094888
          ],
          [
            1611583687476,
            4781195.152847228
          ],
          [
            1611587096173,
            4590322.674722951
          ],
          [
            1611591525271,
            4117064.254983232
          ],
          [
            1611595079216,
            4009696.5206278833
          ],
          [
            1611598741295,
            4283894.0273263985
          ],
          [
            1611602304269,
            4382519.20179053
          ],
          [
            1611604887413,
            4434757.237232775
          ],
          [
            1611608545657,
            4440879.033235275
          ],
          [
            1611612142208,
            4462552.145718675
          ],
          [
            1611615750898,
            4455779.851092851
          ],
          [
            1611619389151,
            4473145.769605954
          ],
          [
            1611624416164,
            4405877.298898632
          ],
          [
            1611628048240,
            4447421.536812472
          ],
          [
            1611632004430,
            4415971.69161309
          ],
          [
            1611635487313,
            4295497.565170555
          ],
          [
            1611638872212,
            4155293.945236906
          ],
          [
            1611642429203,
            4107012.567243775
          ],
          [
            1611645925281,
            4346771.424154769
          ],
          [
            1611649849564,
            4313295.067689004
          ],
          [
            1611653224137,
            4360207.036717592
          ],
          [
            1611656830616,
            4566509.653290524
          ],
          [
            1611660482823,
            4365862.0349031715
          ],
          [
            1611664109340,
            4486859.342051813
          ],
          [
            1611667608461,
            4386768.582598118
          ],
          [
            1611671231076,
            4431843.975650084
          ],
          [
            1611674912195,
            4390317.762037693
          ],
          [
            1611678492597,
            4431268.235074748
          ],
          [
            1611682028116,
            4496192.742996479
          ],
          [
            1611685788750,
            4594362.288852395
          ],
          [
            1611689356658,
            4332310.293358819
          ],
          [
            1611692908514,
            4531494.048140908
          ],
          [
            1611696504696,
            4516017.504299776
          ],
          [
            1611700137430,
            4564454.031776567
          ],
          [
            1611703692667,
            4568237.514325097
          ],
          [
            1611707483546,
            4427139.066175296
          ],
          [
            1611710932797,
            4594895.131271089
          ],
          [
            1611714541603,
            4403993.301104559
          ],
          [
            1611718093864,
            4382038.951926076
          ],
          [
            1611721677084,
            4240295.198856358
          ],
          [
            1611725349949,
            4243435.664593784
          ],
          [
            1611728939355,
            4185914.573647765
          ],
          [
            1611732381146,
            4519545.231299651
          ],
          [
            1611736076409,
            4610004.237577154
          ],
          [
            1611740035659,
            4522667.056073977
          ],
          [
            1611741698372,
            4564749.885200534
          ],
          [
            1611744172429,
            4566046.651335727
          ],
          [
            1611746906860,
            4559515.338942716
          ],
          [
            1611750510913,
            4474578.278581226
          ],
          [
            1611754104076,
            4457134.466194751
          ],
          [
            1611757717071,
            4434816.877869808
          ],
          [
            1611764951788,
            4362049.474240422
          ],
          [
            1611768434257,
            4383096.029249832
          ],
          [
            1611772097409,
            4418436.142263904
          ],
          [
            1611775662582,
            4388700.08207886
          ],
          [
            1611779327671,
            4477290.550196279
          ],
          [
            1611782856556,
            4524697.932969583
          ],
          [
            1611786482311,
            4507113.765885021
          ],
          [
            1611790125338,
            4376855.624679207
          ],
          [
            1611793839737,
            4350731.004478182
          ],
          [
            1611796773868,
            4418315.983464932
          ],
          [
            1611798313000,
            4408486.443506511
          ]
    ]

    const [ gridSize, setGridSize ] = useState({ w: 0, h: 0 });
    const [ activeLineX, setActiveLineX ] = useState(null);
    const [ activeLineY, setActiveLineY ] = useState(null);
    const [ activeValueX, setActiveValueX ] = useState(null);
    const [ activeValueY, setActiveValueY ] = useState(null);

    const theme = useContext(ThemeContext);

    const graphRef = useRef(null);
    const gridRef = useRef(null);

    const data = example === 'low' ? lowData : highData;
    const minY = _.minBy(data, arr => {return arr[1]})[1];
    const maxY = _.maxBy(data, arr => {return arr[1]})[1];
    const width = gridSize.w;
    const height = gridSize.h;

    const id = Math.random();

    const onGridMouseMove = e => {
        if (!gridRef || !gridRef.current) {return}
        const gridRect = gridRef.current.getBoundingClientRect();
        const gridRectLeft = parseInt(gridRect.left);
        const deltaX = e.clientX - gridRectLeft;
        const currentIndex = Math.floor(deltaX / (gridSize.w / data.length));
        setActiveValueX(data[currentIndex][0]);
        setActiveValueY(data[currentIndex][1]);
        setActiveLineX(deltaX);
        setActiveLineY((data[currentIndex][1] - minY) / (maxY - minY) * height);
    };
    
    const onGridMouseLeave = e => {
        setActiveLineX(null);
        setActiveValueY(null);
        setActiveValueX(data[data.length - 1][0]);
        setActiveValueY(data[data.length - 1][1]);
    };

    const calculatePoints = () => {
        const points = [];
        data.map((el, i) => {
            points.push(
                [
                    width / data.length * i,
                    (el[1] - minY) / (maxY - minY) * height
                ]
            );
            points.push(
                [
                    width / data.length * (i + 1),
                    (el[1] - minY) / (maxY - minY) * height
                ]
            );
        });
        points.unshift([0, height]);
        points.push([width, height]);
        return points;
    };

    const renderActiveIndicators = () => {
        if (!activeLineX) {return}
        return (
            <Fragment>
                <StyledActiveLineX
                    style={{
                        left: `${activeLineX}px`
                    }}
                />
                <StyledActiveLineY
                    style={{
                        top: `${activeLineY}px`
                    }}
                />
                <StyledActiveDot 
                    style={{
                        top: `${activeLineY}px`,
                        left: `${activeLineX}px`
					}}		
                />
                <StyledGraphTooltip 
                    style={{
						top: `${activeLineY}px`,
						left: `${activeLineX}px`
					}}
                >
					<div>debugValueX: {parseInt(activeValueX)}</div>
                	<div>debugValueY: {parseInt(activeValueY)}</div>
				</StyledGraphTooltip>
            </Fragment>
        );
    };

    useEffect(() => {
        const resizeObserver = new ResizeObserver(() => {
            if (!gridRef || !gridRef.current) {return}
            const { offsetWidth, offsetHeight } = gridRef.current;
            setGridSize({
                w: offsetWidth,
                h: offsetHeight
            });
        });
        resizeObserver.observe(gridRef.current);
        return () => {
            resizeObserver.disconnect();
        }
    }, []);
    
    return (
        <StyledGraph
            ref={graphRef}
        >   
            <StyledDebug>
                <div>debugValueX: {parseInt(activeValueX)}</div>
                <div>debugValueY: {parseInt(activeValueY)}</div>
            </StyledDebug>
            <StyledGrid
                ref={gridRef}
                onMouseLeave={e => onGridMouseLeave(e)}
                onMouseMove={e => onGridMouseMove(e)}
            >
                <StyledGraphSVG
                    width={gridSize.w}
                    height={gridSize.h}
                >   
                    <defs>
                        <linearGradient
                            id={id}
                            gradientTransform="rotate(90)"
                        >
                            <stop offset="0%" stopColor={`${theme.colors.secundary}33`} />
                            <stop offset="100%" stopColor={`${theme.colors.secundary}00`} />
                        </linearGradient>
                    </defs>
                    <StyledPolygon
                        points={calculatePoints()}
                        fill={`url(#${id})`}
                    />
                </StyledGraphSVG>
                {renderActiveIndicators()}
            </StyledGrid>
        </StyledGraph>
    );

};

export default Graph;